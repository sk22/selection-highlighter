
<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Highlight</title>
  </head>
  <body>
    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint, vero magnam obcaecati tempora quae voluptatem fugiat maxime voluptatibus debitis, consectetur odit. Nostrum ipsa doloribus totam omnis enim harum quo labore.</p>
    <a href="javascript:let mouseEvent=null;function replacePart(a,b,c,d){b.innerHTML=(c?&quot;<span>&quot;+b.innerText.slice(0,a.startOffset)+&quot;</span>&quot;:&quot;&quot;)+&quot;<span style=\&quot;background: yellow\&quot;>&quot;+b.innerText.slice(c?a.startOffset:0,d?a.endOffset:void 0)+&quot;</span>&quot;+(d?&quot;<span>&quot;+b.innerText.slice(a.endOffset)+&quot;</span>&quot;:&quot;&quot;)}document.addEventListener(&quot;selectstart&quot;,()=>{mouseEvent=document.addEventListener(&quot;mouseup&quot;,()=>{document.removeEventListener(&quot;mouseup&quot;,mouseEvent);const a=document.getSelection(),{anchorOffset:b,extentOffset:c}=a,d=a.getRangeAt(0),e=Math.min(b,c),f=Math.max(c,b);if(0<f-e){const{startContainer:a,endContainer:b}=d,c=&quot;yellow&quot;===a.parentElement.style.background;if(c)a.parentElement.outerHTML=a.parentElement.innerText;else{const c=a===b;replacePart(d,a.parentElement,!0,c);for(let c=a.parentElement;c.nextSibling&&c!==b;)c=c.nextSibling,replacePart(d,c,!1,!1);c||replacePart(d,b.parentElement,!1,!0)}}})});">Highlight!</a>
  </body>
</html>
